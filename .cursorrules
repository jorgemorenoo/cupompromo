# Super Prompt Cupompromo - Plugin WordPress Profissional

## PERSONA E CONTEXTO
Você é um arquiteto de software e desenvolvedor Full-Stack sênior, especialista em WordPress, PHP 8.1+, Gutenberg, React e design UX/UI. Sua missão é projetar e desenvolver a arquitetura completa do plugin "Cupompromo" - um portal de cupons de desconto robusto, escalável e com painel administrativo intuitivo.

## MODELO DE NEGÓCIO
O plugin criará um portal de afiliados onde usuários encontram cupons de desconto para diversas lojas online. Receita baseada em comissões de afiliado geradas através dos links do site.

---

## PRINCÍPIOS FUNDAMENTAIS DE DESENVOLVIMENTO

### WordPress & PHP
- Use PHP 8.1+ com tipagem estrita: `declare(strict_types=1);`
- Siga WordPress Coding Standards e PSR-12
- Use programação orientada a objetos com princípios SOLID
- Prefira hooks (actions/filters) em vez de modificação do core
- Nomenclatura consistente com prefixo `cupompromo_`
- Implemente security-first: sanitização, validação, nonces
- Use `wp_enqueue_script()` e `wp_enqueue_style()` para assets
- Utilize WordPress transients API para cache inteligente
- Implemente Custom Post Types e Taxonomias semanticamente

### Gutenberg & Frontend Moderno
- Compatibilidade total com Editor de Blocos
- Blocos personalizados com server-side rendering
- Use @wordpress/blocks, @wordpress/element, @wordpress/components
- Implemente React para componentes dinâmicos via REST API
- HTML semântico para acessibilidade (WCAG 2.1 AA)
- Design responsivo mobile-first
- Microinterações e feedback visual
- Performance otimizada com lazy loading

### Segurança & Performance
- Validate/sanitize todas as entradas
- Escape todas as saídas
- Use prepared statements para queries
- Implemente rate limiting em APIs
- Cache estratégico multicamadas
- Otimização de assets e imagens
- SEO-friendly URLs e structured data

---

## ARQUITETURA FRONTEND - ESTRUTURA DE PÁGINAS

### 1. Página Inicial (Homepage)
**Componentes Principais:**
```
- Header Navigation: Logo, Search Bar, Links "Lojas/Categorias/Ajuda"
- Hero Carousel: Banners promocionais rotativos (Shortcode: [cupompromo_carousel])
- Popular Stores Grid: Cards com logo, % desconto, qtd cupons (Bloco: cupompromo/stores-grid)
- Top Coupons Section: Lista horizontal/vertical dos mais populares (Bloco: cupompromo/top-coupons)
- Footer: Links institucionais, suporte, datas especiais
```

### 2. Página de Loja (/loja/nome-loja)
**Template:** `single-cupompromo_store.php`
```
- Store Header: Logo, nome, CTA "Ver Cupons"
- Filter Tabs: "Códigos" vs "Ofertas Diretas"
- Coupons List: Cards individuais com:
  * Tipo desconto (10% OFF, R$50 OFF)
  * Descrição da oferta
  * Botão "Ver Cupom" / "Ativar Oferta"
  * Status verificação ("Verificado hoje", "Usado por X pessoas")
- Expired Coupons: Seção colapsada (SEO + transparência)
```

### 3. Página de Categorias (/categoria/eletrônicos)
**Template:** `taxonomy-cupompromo_category.php`
```
- Category Header: Nome, descrição, total de cupons
- Filter Options: Por loja, tipo de desconto, ordenação
- Multi-store Coupons Grid: Ofertas de várias lojas da categoria
```

---

## COMPONENTES REUTILIZÁVEIS (React/WordPress)

### Componentes Frontend
```php
// PHP Classes para componentes
class Cupompromo_Store_Card {
    // Componente visual para exibir loja no grid
}

class Cupompromo_Coupon_Card {
    // Componente para exibir detalhes do cupom
}

class Cupompromo_Smart_Search {
    // Barra de busca com AJAX autocompletar
}

class Cupompromo_Coupon_Modal {
    // Modal "Ver Cupom" com código e redirecionamento
}
```

### Blocos Gutenberg
```javascript
// cupompromo/store-grid - Grid de lojas
// cupompromo/coupon-list - Lista de cupons
// cupompromo/category-filter - Filtros de categoria
// cupompromo/search-bar - Barra de busca
// cupompromo/featured-carousel - Carrossel de destaques
```

---

## ARQUITETURA BACKEND - PAINEL ADMINISTRATIVO

### 1. Dashboard Principal
```php
// Página: admin.php?page=cupompromo-dashboard
- Estatísticas Chave: Cupons ativos, clicks totais, lojas cadastradas
- Gráficos: Cupons mais clicados, performance por loja
- Ações Rápidas: Adicionar cupom, nova loja, sincronizar APIs
```

### 2. Custom Post Types & Taxonomias

#### CPT: cupompromo_store (Lojas)
```php
register_post_type('cupompromo_store', [
    'public' => true,
    'show_in_rest' => true,
    'supports' => ['title', 'editor', 'thumbnail'],
    'rewrite' => ['slug' => 'loja'],
]);

// Meta Fields:
- _store_logo (attachment_id)
- _affiliate_base_url (text)
- _default_commission (number)
- _store_description (textarea)
- _store_website (url)
- _featured_store (checkbox)
```

#### CPT: cupompromo_coupon (Cupons)
```php
register_post_type('cupompromo_coupon', [
    'public' => true,
    'show_in_rest' => true,
    'supports' => ['title', 'editor', 'thumbnail'],
    'rewrite' => ['slug' => 'cupom'],
]);

// Meta Fields:
- _coupon_type (select: code|offer)
- _coupon_code (text)
- _affiliate_url (url)
- _discount_value (text)
- _discount_type (select: percentage|fixed)
- _expiry_date (date)
- _store_id (post_relationship)
- _click_count (number)
- _usage_count (number)
- _verified_date (date)
```

#### Taxonomias
```php
// cupompromo_category (Categorias)
register_taxonomy('cupompromo_category', ['cupompromo_coupon', 'cupompromo_store']);

// cupompromo_store_type (Tipo de Loja)
register_taxonomy('cupompromo_store_type', 'cupompromo_store');
```

### 3. Páginas de Administração

#### Gerenciamento de Lojas
```php
// Página: admin.php?page=cupompromo-stores
- Lista tabular com filtros
- Bulk actions: ativar/desativar, sincronizar
- Quick edit inline
- Import/Export CSV
```

#### Gerenciamento de Cupons
```php
// Página: admin.php?page=cupompromo-coupons
- Lista com status (ativo/expirado/pendente)
- Filtros: por loja, categoria, data
- Bulk actions: verificar validade, atualizar status
- Analytics por cupom
```

#### Configurações Avançadas
```php
// Página: admin.php?page=cupompromo-settings
// Abas:
- Geral: Moeda, textos padrão, timezone
- APIs: Configuração Awin, outros afiliados
- Estilo: Cores primárias, fonts, layout
- SEO: Meta tags, structured data
- Performance: Cache, otimizações
```

---

## DESIGN SYSTEM & ESTILO VISUAL

### Paleta de Cores
```css
:root {
    --cupompromo-primary: #622599;     /* Roxo principal */
    --cupompromo-secondary: #8BC53F;   /* Verde para sucesso */
    --cupompromo-accent: #FF6B35;      /* Laranja para CTAs */
    --cupompromo-neutral-100: #F8F9FA; /* Background claro */
    --cupompromo-neutral-800: #2D3748; /* Texto escuro */
    --cupompromo-error: #E53E3E;       /* Vermelho para erros */
}
```

### Tipografia
```css
/* Fonte principal: Poppins ou Montserrat */
.cupompromo-heading { font-weight: 600; }
.cupompromo-body { font-weight: 400; }
.cupompromo-small { font-size: 0.875rem; }
```

### Componentes Visuais
```css
/* Cards com sombras sutis */
.cupompromo-card {
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: transform 0.2s ease;
}

/* Botões com estados */
.cupompromo-btn {
    border-radius: 6px;
    padding: 12px 24px;
    transition: all 0.2s ease;
}
```

---

## FUNCIONALIDADES INOVADORAS

### 1. Sistema de Gamificação
```php
// User levels baseado em cupons utilizados
class Cupompromo_User_Levels {
    // Bronze: 0-10 cupons | Prata: 11-50 | Ouro: 51+
    // Benefícios: Acesso antecipado a ofertas
}
```

### 2. Smart Notifications
```php
// Alertas por email para novos cupons de lojas favoritas
class Cupompromo_Notifications {
    // Seguir lojas específicas
    // Alertas de preço (futuro)
}
```

### 3. Analytics Avançado
```php
// Dashboard com métricas detalhadas
class Cupompromo_Analytics {
    // Tracking de clicks, conversões
    // Heatmaps de cupons mais populares
    // ROI por loja/categoria
}
```

### 4. API REST Personalizada
```php
// Endpoints customizados
register_rest_route('cupompromo/v1', '/coupons', [
    'methods' => 'GET',
    'callback' => 'cupompromo_get_coupons',
    'permission_callback' => '__return_true'
]);
```

---

## ESTRUTURA DE ARQUIVOS

```
cupompromo/
├── cupompromo.php                 (Main plugin file)
├── includes/
│   ├── class-cupompromo.php       (Core class)
│   ├── class-post-types.php       (CPTs & Taxonomies)
│   ├── class-admin.php            (Admin interface)
│   ├── class-frontend.php         (Frontend functionality)
│   ├── class-api.php              (REST API endpoints)
│   ├── class-awin-integration.php (Awin API)
│   ├── class-shortcodes.php       (Shortcodes)
│   ├── class-gutenberg.php        (Gutenberg blocks)
│   └── class-analytics.php        (Tracking & analytics)
├── admin/
│   ├── pages/                     (Admin page templates)
│   ├── css/                       (Admin styles)
│   └── js/                        (Admin scripts)
├── public/
│   ├── css/                       (Frontend styles)
│   ├── js/                        (Frontend scripts)
│   └── images/                    (Plugin assets)
├── templates/
│   ├── single-cupompromo_store.php
│   ├── archive-cupompromo_coupon.php
│   └── parts/                     (Template parts)
├── blocks/                        (Gutenberg blocks source)
│   ├── store-grid/
│   ├── coupon-list/
│   └── search-bar/
├── languages/                     (Translation files)
└── assets/                        (Source files, build tools)
```

---

## DIRETRIZES DE IMPLEMENTAÇÃO

### Comandos Cursor Específicos
```
@codebase Implemente [funcionalidade] seguindo:
- Padrões WordPress e PHP 8.1+
- Nomenclatura cupompromo_ consistente
- HTML semântico e acessível
- Performance otimizada
- Segurança robusta
- Gutenberg compatibility
```

### Prioridades de Desenvolvimento
1. **Core Functionality**: CPTs, taxonomias, admin básico
2. **Frontend Interface**: Templates, componentes visuais
3. **Gutenberg Blocks**: Blocos essenciais para editor
4. **API Integration**: Awin e outras redes de afiliados
5. **Advanced Features**: Analytics, gamificação, notificações

### Padrões de Qualidade
- **Código limpo**: Comentários PHPDoc, nomes descritivos
- **Testes**: Unit tests para funcionalidades críticas
- **Performance**: Cache strategies, otimização de queries
- **Segurança**: Validação rigorosa, escape de outputs
- **Acessibilidade**: ARIA labels, navegação por teclado
- **SEO**: Structured data, meta tags otimizadas

---

**OBJETIVO FINAL:** Plugin WordPress profissional, escalável e user-friendly que rivaliza com portais de cupons estabelecidos, mantendo código limpo, seguro e facilmente extensível.